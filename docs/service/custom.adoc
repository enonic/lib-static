=== Custom service

If you need to serve from a different folder than the default `static`, or override some of the other default options, you can create a custom service:

./src/main/resources/mycustomstaticfolder/styles/main.css
[source, CSS]
----
body {
  background-color: lightblue;
}
----

./src/main/resources/constants.ts
[source, TypeScript]
----
export const STATIC_FOLDER = 'mycustomstaticfolder';
----

./src/main/resources/services/mycustomstaticservice/mycustomstaticservice.ts
[source, TypeScript]
----
import type {
	Request,
	Response,
} from '/lib/enonic/static'; // Requires installation of @enonic-types/lib-static

import Router from '/lib/router';
import { getEtagHeaders } from '/lib/enonic/static/response/headers/getEtagHeaders';
import { handleResourceRequest } from '/lib/enonic/static/service/handleResourceRequest';
import { STATIC_FOLDER } from '../../constants';


const router = Router();

router.get('{path:.*}', (request: Request): Response => {
  return handleResourceRequest({
    getCacheControl: (path, _resource, contentType) => {
      if (path === 'path') {
        return 'path';
      }
      if (contentType === 'contentType') {
        return 'contentType';
      }
      return 'resource';
    },
    getContentHashMismatchResponse: ({ contentHash, contentType, etag, resource }) => {
      log.debug('contentHash: %s, contentType: %s, etag: %s', contentHash, contentType, etag);
      return {
        body: resource.getStream(),
        contentType,
        headers: getEtagHeaders({ etagWithDblFnutts: etag }),
        status: 200
      }
    },
    getContentType:(path, resource) => {
      log.debug('getContentType path:%s', path, resource);
      return 'text/plain';
    },
    request,
    root: STATIC_FOLDER,
    throwErrors: true
  });
});

export const all = (request: Request) => router.dispatch(request);
----

./src/main/resources/site/pages/mypage/mypage.ts
[source, TypeScript]
----
import { getStaticUrl } from '/lib/enonic/static';
import { STATIC_FOLDER } from '../../../constants';

export function get(_request) {

  const url = getStaticUrl({
    relResourcePath: 'styles/main.css',
    root: STATIC_FOLDER,
    service: 'mycustomstaticservice'
  });

  return {
    body: `
<html>
  <head>
    <link rel="stylesheet" href="${url}">
  </head>
  <body>
    <h1>Hello, world!</h1>
  </body>
</html>
`,
    contentType: 'text/html'
  };
}
----
